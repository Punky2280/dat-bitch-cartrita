# Design System: Color Tokens & Usage

Date: 2025-08-10
Status: Active
Owner: Frontend Platform / Theming

## Overview
Centralized color tokens eliminate scattered hex values, enabling consistent theming, easier accessibility audits, and future branding updates. Raw hex usage in components is disallowed (enforced by `npm run theme:scan`).

## Token Hierarchy
```
Base (colors.*) -> Semantic (semantic.*) -> Gradients (gradients.*) -> Component usage
```
Additions must flow left to right; avoid skipping semantic layer unless a gradient consumes only base tokens.

## Base Palette (colors)
Grayscale: gray100 … gray900, white, black.
Accents / Extended: accentPrimary, accentPrimaryHover, accentSecondary, accentTertiary,
accentBlue, accentPurple, accentMagenta, accentRose, accentPink, accentYellow,
accentAqua, accentCyan, accentGreen, accentTeal, accentPeachLight, accentPeach, accentMint.
Status: success, info, warning, danger.

## Semantic Tokens (semantic)
Backgrounds: bg, bgAlt, surface, surfaceAlt
Borders: border, borderSubtle
Text: textPrimary, textSecondary, textMuted, textInverted
Interaction: focus, link, linkHover
Feedback: critical, warn, success, info, accent, accentAlt
Workflow Graph Categories: graphTrigger, graphAI, graphRAG, graphMCP, graphHTTP, graphLogic, graphData

Light mode overrides are applied via `buildTheme('light')`.

## Gradients (gradients)
trigger, ai, rag, mcp, http, logic, data, fallback — each combines extended accent stops.
Use only for: workflow node backgrounds, hero / highlight surfaces, or branded badges. Avoid general text backgrounds.

## CSS Variables Layer
An optional CSS variable export mirrors semantic + gradients for non-TS contexts. Variables follow:
```
--ct-color-<semantic-token>
--ct-gradient-<name>
```
Generated by `applyCssVariables(theme)` (see theme README). Keep variable names stable.

## Usage Guidelines
1. Import from `@/theme/tokens`:
   ```ts
   import { semantic, gradients } from '@/theme/tokens';
   <div style={{ background: gradients.ai, color: semantic.textInverted }} />
   ```
2. Never introduce raw hex in components. If missing a token, add to base & semantic.
3. Prefer semantic names (e.g., `semantic.success`) over direct accent picks.
4. Gradients: pick the domain-matched gradient; fallback if unknown.
5. Icons / Data Viz: Use semantic or extended accent tokens; ensure contrast with background.

## Adding a New Color
1. Confirm no existing semantic token fits.
2. Add base color to `colors` with descriptive purpose-based name (not brand-specific hex label).
3. (Optional) Map to `semantic.<purpose>` or new domain-specific key (avoid collisions).
4. Add/adjust gradients if needed.
5. Update this doc; run `npm run theme:scan` to ensure no stray hex remains.

## Accessibility
- Minimum contrast: 4.5:1 for normal text (check textPrimary/surface combos), 3:1 for large text (>=24px or 18.66px bold).
- Avoid using color alone to convey status; pair with icon / shape.
- Neon accentMint reserved for visualization overlays; not for body text.

## Enforcement
- Script: `npm run theme:scan` fails build on unauthorized hex.
- Allowlist: `tokens.ts`, `ThemeContext.tsx`, `index.css` (foundation only).

## Migration Notes
- All prior inline hex values replaced as of 2025-08-10.
- Gradients centralized; future additions require doc & code update.

## Examples
Workflow Node Style:
```ts
style={{ background: gradients.rag, color: semantic.textInverted, border: `2px solid ${semantic.border}` }}
```
Content Type Color Mapping:
```ts
const contentTypeColor = {
  text: colors.accentBlue,
  code: colors.success,
  image: colors.warning,
  document: colors.accentPurple,
  link: colors.danger,
};
```

## Open Questions / Future
- Potential dynamic contrast adjustment for user-selected custom colors.
- Theming animation transitions.
- Dark contrast audit automation.

---
Changelog: Initial doc created.
